<html>
<head>
    <title>Sensors</title>
</head>
<body>
<h1>Sensor Usage:</h1>
<h3>Absolute Orientation</h3>
<div id="absoluteOrientation"></div>
<h3>Accelerometer</h3>
<button onclick="accelerometerDemo()">Test</button>
<div id="accelerometer"></div>
<h3>Ambient Light</h3>
<button onclick="ambientLightDemo()">Test</button>
<div id="ambientLight"></div>
<h3>Gravity</h3>
<button onclick="gravityDemo()">Test</button>
<div id="gravity"></div>
<h3>Gyroscope</h3>
<button onclick="gyroscopeDemo()">Test</button>
<div id="gyroscope"></div>
<h3>Linear Acceleration</h3>
<button onclick="linearAccelerationDemo()">Test</button>
<div id="linearAcceleration"></div>
<h3>Magnetometer</h3>
<button onclick="magnetometerDemo()">Test</button>
<div id="magnetometer"></div>
<h3>Orientation</h3>
<button onclick="orientationDemo()">Test</button>
<div id="orientation"></div>
<h3>Relative Orientation</h3>
<button onclick="relativeOrientationDemo()">Test</button>
<div id="relativeOrientation"></div>
<script>
    function accelerometerDemo() {
        let accelDiv = document.getElementById("accelerometer");

        let options = {frequency: 60, referenceFrame: "device"};
        let sensor = new AbsoluteOrientationSensor(options);
        sensor.addEventListener("reading", () => {
            // model is a Three.js object instantiated elsewhere.
            model.quaternion.fromArray(sensor.quaternion).inverse();
            accelDiv.innerHTML = sensor.quaternion.toString();
        });
        sensor.addEventListener("error", (event) => {
            if (event.error.name === "NotReadableError") {
                accelDiv.innerHTML = " Accelerometer is not available. " + event.error.name + " " + event.error.message;
            }
        });
        sensor.start();
    }


    //ambientLight sensor
    function ambientLightDemo() {
        let ambientLightDiv = document.getElementById("ambientLight");

        let sensor = new AmbientLightSensor();
        sensor.addEventListener("reading", (event) => {
            ambientLightDiv.innerHTML = "Current light level:" + sensor.illuminance;
        });
        sensor.addEventListener("error", (event) => {
            ambientLightDiv.innerHTML = "Ambient light sensor is not available. " + event.error.name + " " + event.error.message;
        });
        sensor.start();
    }

    //gravity sensor
    function gravityDemo() {
        let gravityDiv = document.getElementById("gravity");

        let gravitySensor = new GravitySensor({frequency: 60});
        gravitySensor.addEventListener("reading", (e) => {
            gravityDiv.innerHTML = `Gravity along the X-axis ${gravitySensor.x}`;
            gravityDiv.innerHTML += `Gravity along the Y-axis ${gravitySensor.y}`;
            gravityDiv.innerHTML += `Gravity along the Z-axis ${gravitySensor.z}`;
        });
        gravitySensor.addEventListener("error", (event) => {
            gravityDiv.innerHTML = "Gravity sensor is not available. " + event.error.name + " " + event.error.message;
        });
        gravitySensor.start();
    }

    //gyroscope sensor
    function gyroscopeDemo() {
        let gyroscopeDiv = document.getElementById("gyroscope");

        let gyroscope = new Gyroscope({frequency: 60});
        gyroscope.addEventListener("reading", (e) => {
            gyroscopeDiv.innerHTML = `Angular velocity x: ${gyroscope.x} y: ${gyroscope.y} z: ${gyroscope.z}`;
        });     
        gyroscope.start();
    }
</script>
</body>
</html>