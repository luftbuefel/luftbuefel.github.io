<html>
<head>
    <title>Sensors</title>
</head>
<body>
<h1>Sensor Usage:</h1>
<div id="accelerometer"></div>
<div id="ambientLight"></div>
<script>
    //accelerometer
    let accelerometerText = document.getElementById("accelerometer");
    const acl = new Accelerometer({frequency: 60});
    acl.addEventListener("reading", () => {
        console.log(`Acceleration along the X-axis ${acl.x}`);
        console.log(`Acceleration along the Y-axis ${acl.y}`);
        console.log(`Acceleration along the Z-axis ${acl.z}`);
        accelerometerText.innerHTML = `Acceleration along the X-axis ${acl.x} <br>Acceleration along the Y-axis ${acl.y} \n Acceleration along the Z-axis ${acl.z}`;
    });

    acl.start();

    //ambientLight sensor
    let ambientLightText = document.getElementById("ambientLight");
    if ("AmbientLightSensor" in window) {
        const sensor = new AmbientLightSensor();
        sensor.addEventListener("reading", (event) => {
            // console.log("Current light level:", sensor.illuminance);
            ambientLightText.innerHTML = "Current light level:"+ sensor.illuminance;
        });
        sensor.addEventListener("error", (event) => {
            // console.log(event.error.name, event.error.message);
            ambientLightText.innerHTML = event.error.name+" "+ event.error.message;
        });
        sensor.start();
    }



    const sensor = new AbsoluteOrientationSensor();
    Promise.all([
        navigator.permissions.query({ name: "accelerometer" }),
        navigator.permissions.query({ name: "magnetometer" }),
        navigator.permissions.query({ name: "gyroscope" }),
    ]).then((results) => {
        if (results.every((result) => result.state === "granted")) {
            sensor.start();
            // â€¦
        } else {
            console.log("No permissions to use AbsoluteOrientationSensor.");
        }
    });
</script>
